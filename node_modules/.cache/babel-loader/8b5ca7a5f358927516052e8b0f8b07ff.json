{"remainingRequest":"D:\\JK2L2\\BUCKET\\S2S_IBAS_WEB\\node_modules\\babel-loader\\lib\\index.js!D:\\JK2L2\\BUCKET\\S2S_IBAS_WEB\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\JK2L2\\BUCKET\\S2S_IBAS_WEB\\src\\store\\modules\\AuthModule.js","dependencies":[{"path":"D:\\JK2L2\\BUCKET\\S2S_IBAS_WEB\\src\\store\\modules\\AuthModule.js","mtime":1646291556126},{"path":"D:\\JK2L2\\BUCKET\\S2S_IBAS_WEB\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641976741849},{"path":"D:\\JK2L2\\BUCKET\\S2S_IBAS_WEB\\node_modules\\babel-loader\\lib\\index.js","mtime":1641976744103},{"path":"D:\\JK2L2\\BUCKET\\S2S_IBAS_WEB\\node_modules\\eslint-loader\\index.js","mtime":1641976742144}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmciOwppbXBvcnQgYXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyBBUEkgfSBmcm9tICIuLi8uLi8uLi9odHRwLWNvbW1vbiI7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgc3RhdHVzOiAiIiwKICAgIHRva2VuOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKSB8fCAiIiwKICAgIHVzZXI6ICcnLAogICAgcm9sZTogJycsCiAgICBwYXJ0bmVyOiAnJwogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBhdXRoX3JlcXVlc3Q6IGZ1bmN0aW9uIGF1dGhfcmVxdWVzdChzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0dXMgPSAibG9hZGluZyI7CiAgICB9LAogICAgYXV0aF9zdWNjZXNzOiBmdW5jdGlvbiBhdXRoX3N1Y2Nlc3Moc3RhdGUsIHBheWxvYWQpIHsKICAgICAgY29uc29sZS5sb2cocGF5bG9hZC5kYXRhLmFkbWluTG9naW4ubmFtZSk7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICJzdWNjZXNzIjsKICAgICAgc3RhdGUudG9rZW4gPSBwYXlsb2FkLmRhdGEudG9rZW47CiAgICAgIHN0YXRlLnVzZXIgPSBwYXlsb2FkLmRhdGEuYWRtaW5Mb2dpbi5uYW1lOwogICAgICBzdGF0ZS5yb2xlID0gcGF5bG9hZC51cm9sZTsKICAgICAgc3RhdGUucGFydG5lciA9IHBheWxvYWQucGFydG5lcjsKICAgIH0sCiAgICBhdXRoX2Vycm9yOiBmdW5jdGlvbiBhdXRoX2Vycm9yKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXR1cyA9ICJlcnJvciI7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdHVzID0gIiI7CiAgICAgIHN0YXRlLnRva2VuID0gIiI7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlcikgewogICAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIC8vY29uc3QgX3VzZXJuYW1lID0gJ2hlZXlSbnJGKUxaJXkjNlhTe1NTJwogICAgICAvL2NvbnN0IF9wYXNzd29yZCA9ICdSS11qNj0sNHVWPEdfelkkcDZOcycKICAgICAgLy92YXIgY29uZmlnID0gewogICAgICAvLyBhdXRoOiB7CiAgICAgIC8vICAgdXNlcm5hbWU6IF91c2VybmFtZSwKICAgICAgLy8gICAgcGFzc3dvcmQ6IF9wYXNzd29yZAogICAgICAvL30KICAgICAgLy99OwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGNvbW1pdCgnYXV0aF9yZXF1ZXN0Jyk7IC8vY29uc29sZS5sb2codXNlcik7CgogICAgICAgIGF4aW9zLnBvc3QoJ2h0dHA6Ly8xNjEuNDkuNjEuNDM6ODA4NS9hcGkvYWRtaW4tbG9naW4nLCB1c2VyKS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgICBpZiAocmVzcC5kYXRhLnN0YXR1cyA9PSBmYWxzZSkgewogICAgICAgICAgICAvLyBhbGVydCgiSW52YWxpZCB1c2VybmFtZS9wYXNzd29yZCIpCiAgICAgICAgICAgIC8vIHJldHVybiBmYWxzZQogICAgICAgICAgICByZWplY3QoIkludmFsaWQgdXNlcm5hbWUvcGFzc3dvcmQiKTsKICAgICAgICAgIH0gLy8gY29uc3QgdG9rZW4gPSByZXNwLmRhdGEubWVzc2FnZQogICAgICAgICAgLy8gY29uc3QgdXNlciA9IHJlc3AuZGF0YS5zdGF0dXNDb2RlCiAgICAgICAgICAvLyBjb25zdCByb2xlID0gcmVzcC5kYXRhLnVyb2xlCgoKICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3AuZGF0YSk7CiAgICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXNwLmRhdGE7IC8vY29uc29sZS5sb2cocmVzcC5kYXRhLmRhdGEudG9rZW4pOwoKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd0b2tlbicsIHJlc3AuZGF0YS5kYXRhLnRva2VuKTsgLy9sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlck5hbWUnLCByZXNwLmRhdGEuZGF0YS5hZG1pbkxvZ2luLm5hbWUpOwoKICAgICAgICAgIHJlc3BvbnNlLnVzZXJuYW1lID0gdXNlci5Vc2VyTmFtZTsgLy8gYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IHRva2VuCgogICAgICAgICAgY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCByZXNwb25zZSk7CiAgICAgICAgICByZXNvbHZlKHJlc3ApOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9lcnJvcicpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICByZWplY3QoZXJyKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoX3JlZjIpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICB0cnkgewogICAgICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOyAvLyBkZWxldGUgYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXQoKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHNlc3Npb246IGZ1bmN0aW9uIHNlc3Npb24oX3JlZjMpIHsKICAgICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICAvLyBjb21taXQoImF1dGhfcmVxdWVzdCIpOwogICAgICAgIEFQSS5nZXQoIi9zZXNzaW9uIikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKCiAgICAgICAgICBpZiAoIWRhdGEuc3RhdHVzKSB7CiAgICAgICAgICAgIGNvbW1pdCgibG9nb3V0Iik7CiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbiA9ICIvIjsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmxvZygic2Vzc2lvbiIsIGRhdGEuc3RhdHVzKTsKICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgY29tbWl0KCJhdXRoX2Vycm9yIik7CiAgICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9nZ2VkSW46IGZ1bmN0aW9uIGlzTG9nZ2VkSW4oc3RhdGUpIHsKICAgICAgcmV0dXJuICEhc3RhdGUudG9rZW47CiAgICB9LAogICAgdG9rZW46IGZ1bmN0aW9uIHRva2VuKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS50b2tlbjsKICAgIH0sCiAgICBhdXRoU3RhdHVzOiBmdW5jdGlvbiBhdXRoU3RhdHVzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0dXM7CiAgICB9LAogICAgLy8gdXNlclJvbGU6IHN0YXRlID0+IHN0YXRlLnJvbGUsCiAgICAvLyB1c2VyUm9sZTogc3RhdGUgPT4gewogICAgLy8gICAgcmV0dXJuIHN0YXRlLnJvbGU7CiAgICAvLyAgfSwKICAgIGdldFVzZXJuYW1lOiBmdW5jdGlvbiBnZXRVc2VybmFtZShzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUudXNlcjsKICAgIH0gLy9nZXRQYXJ0bmVyOiBzdGF0ZSA9PiB7CiAgICAvLyAgcmV0dXJuIHN0YXRlLnBhcnRuZXIKICAgIC8vfQoKICB9Cn07"},{"version":3,"sources":["D:/JK2L2/BUCKET/S2S_IBAS_WEB/src/store/modules/AuthModule.js"],"names":["axios","API","state","status","token","localStorage","getItem","user","role","partner","mutations","auth_request","auth_success","payload","console","log","data","adminLogin","name","urole","auth_error","logout","actions","login","commit","Promise","resolve","reject","post","then","resp","response","setItem","username","UserName","catch","err","removeItem","error","session","get","window","location","getters","isLoggedIn","authStatus","getUsername"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport { API } from \"../../../http-common\";\r\nexport default {\r\n  state: {\r\n    status: \"\",\r\n    token: localStorage.getItem(\"token\") || \"\",\r\n    user: '',\r\n    role: '',\r\n    partner: ''\r\n  },\r\n\r\n  mutations: {\r\n    auth_request(state) {\r\n      state.status = \"loading\";\r\n    },\r\n    auth_success(state, payload) {\r\n      console.log(payload.data.adminLogin.name);\r\n      state.status = \"success\";\r\n      state.token = payload.data.token;\r\n      state.user = payload.data.adminLogin.name;\r\n      state.role = payload.urole;\r\n      state.partner = payload.partner;\r\n    },\r\n    auth_error(state) {\r\n      state.status = \"error\";\r\n    },\r\n    logout(state) {\r\n      state.status = \"\";\r\n      state.token = \"\";\r\n    },\r\n  },\r\n\r\n  actions: {\r\n    login({ commit }, user) {\r\n      //const _username = 'heeyRnrF)LZ%y#6XS{SS'\r\n      //const _password = 'RK]j6=,4uV<G_zY$p6Ns'\r\n      //var config = {\r\n      // auth: {\r\n      //   username: _username,\r\n      //    password: _password\r\n      //}\r\n      //};\r\n      return new Promise((resolve, reject) => {\r\n       commit('auth_request')\r\n       //console.log(user);\r\n        axios.post('http://161.49.61.43:8085/api/admin-login', user)\r\n          .then(resp => {\r\n            if (resp.data.status == false) {\r\n              // alert(\"Invalid username/password\")\r\n              // return false\r\n              reject(\"Invalid username/password\");\r\n            }\r\n            // const token = resp.data.message\r\n            // const user = resp.data.statusCode\r\n            // const role = resp.data.urole\r\n            console.log(resp.data);\r\n            \r\n            let response = resp.data;\r\n           //console.log(resp.data.data.token);\r\n        \r\n        \r\n            localStorage.setItem('token', resp.data.data.token);\r\n            //localStorage.setItem('userName', resp.data.data.adminLogin.name);\r\n            response.username = user.UserName;\r\n            // axios.defaults.headers.common['Authorization'] = token\r\n            commit('auth_success', response)\r\n            resolve(resp)\r\n          })\r\n          .catch(err => {\r\n            commit('auth_error')\r\n            localStorage.removeItem('token')\r\n            reject(err)\r\n          })\r\n      })\r\n    },\r\n\r\n    logout({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        try {\r\n          commit('logout')\r\n          localStorage.removeItem('token')\r\n          // delete axios.defaults.headers.common['Authorization']\r\n          resolve()\r\n        } catch (error) {\r\n          reject(error)\r\n        }\r\n      })\r\n    },\r\n    session({ commit }) {\r\n      return new Promise((resolve, reject) => {\r\n        // commit(\"auth_request\");\r\n        API.get(\"/session\")\r\n          .then((response) => {\r\n            const data = response.data;\r\n\r\n            if (!data.status) {\r\n              commit(\"logout\");\r\n              window.location = \"/\";\r\n            }\r\n            console.log(\"session\", data.status);\r\n            resolve(response);\r\n          })\r\n          .catch((error) => {\r\n            commit(\"auth_error\");\r\n            reject(error);\r\n          });\r\n      });\r\n    },\r\n  },\r\n\r\n  getters: {\r\n    isLoggedIn: state => !!state.token,\r\n    token: state => state.token,\r\n    authStatus: state => state.status,\r\n // userRole: state => state.role,\r\n   // userRole: state => {\r\n  //    return state.role;\r\n  //  },\r\n    getUsername: state => {\r\n      return state.user\r\n    },\r\n    //getPartner: state => {\r\n    //  return state.partner\r\n   //}\r\n  },\r\n};\r\n"]}]}